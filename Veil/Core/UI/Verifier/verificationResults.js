window;import{jsxs as n,jsx as e,Fragment as r}from"react/jsx-runtime";import*as t from"react";import{useRpcSession as o,EnvPosContext as a,useAsyncPersistent as i,mapRpcError as s,importWidgetModule as c}from"@leanprover/infoview";async function d(o,a,i){if("text"in i)return e(r,{children:i.text});if("element"in i){const[n,r,s]=i.element,c={};for(const[n,e]of r)c[n]=e;const l=await Promise.all(s.map((async n=>await d(o,a,n))));return"hr"===n?e("hr",{}):0===l.length?t.createElement(n,c):t.createElement(n,c,l)}if("component"in i){const[n,e,r,s]=i.component,l=await Promise.all(s.map((async n=>await d(o,a,n)))),p={...r,pos:a},u=await c(o,a,n);if(!(e in u))throw new Error(`Module '${n}' does not export '${e}'`);return 0===l.length?t.createElement(u[e],p):t.createElement(u[e],p,l)}return n("span",{className:"red",children:["Unknown HTML variant: ",JSON.stringify(i)]})}function l({html:c}){const l=o(),p=t.useContext(a),u=i((()=>d(l,p,c)),[l,p,c]);return"resolved"===u.state?u.value:"rejected"===u.state?n("span",{className:"red",children:["Error rendering HTML: ",s(u.error).message]}):e(r,{})}function p(n,e){if(n===e)return!0;if(null==n||null==e)return n===e;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!p(n[r],e[r]))return!1;return!0}if("object"==typeof n&&"object"==typeof e){const r=n,t=e,o=Object.keys(r),a=Object.keys(t);if(o.length!==a.length)return!1;for(const n of o){if(!(n in t))return!1;if(!p(r[n],t[n]))return!1}return!0}return!1}function u(n,e){const r=function(n,e){const r=n.length,t=e.length,o=Array.from({length:r+1},(()=>Array(t+1).fill(0)));for(let a=1;a<=r;a++)for(let r=1;r<=t;r++)p(n[a-1],e[r-1])?o[a][r]=o[a-1][r-1]+1:o[a][r]=Math.max(o[a-1][r],o[a][r-1]);const a=[];let i=r,s=t;for(;i>0&&s>0;)p(n[i-1],e[s-1])?(a.unshift([i-1,s-1]),i--,s--):o[i-1][s]>o[i][s-1]?i--:s--;return a}(n,e),t=[];let o=0,a=0,i=0;for(;o<n.length||a<e.length;){const s=i<r.length?r[i]:null;if(s&&o===s[0]&&a===s[1])t.push({element:e[a],status:"unchanged"}),o++,a++,i++;else{const r=s?s[0]:n.length;for(;o<r;)t.push({element:n[o],status:"removed"}),o++;const i=s?s[1]:e.length;for(;a<i;)t.push({element:e[a],status:"added"}),a++}}return t}function g(n,t=", "){const o=[];return n.forEach(((r,a)=>{o.push(e("span",{children:r},`n-${a}`)),a<n.length-1&&o.push(e("span",{children:t},`s-${a}`))})),e(r,{children:o})}const v=({text:o,className:a})=>{const[i,s]=t.useState(!1);return n("button",{className:a,onClick:async()=>{try{await navigator.clipboard.writeText(o),s(!0),setTimeout((()=>s(!1)),2e3)}catch(n){console.error("Failed to copy:",n)}},title:"Copy to clipboard",children:[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i?e("path",{d:"M20 6L9 17l-5-5",strokeLinecap:"round",strokeLinejoin:"round"}):n(r,{children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),i?"Copied!":"Copy JSON"]})};function f(n){return n.trim().split(/\s+/).map((n=>{let e=n.replace(/^[()\[\]{}:,]+|[()\[\]{}:,]+$/g,"");if(/^-?\d+(?:\.\d+)?$/.test(e))return e;if(e.includes(".")){const n=e.split(".");e=n[n.length-1]||e}return e})).filter((n=>n.length>0)).join(" ")}function x(n){if("string"==typeof n)return n;if("object"==typeof n&&null!==n){const e=n,r=Object.keys(e);if(1===r.length){let n=r[0];n.startsWith("_")&&(n=n.slice(1));const t=e[r[0]];if("object"==typeof t&&null!==t&&!Array.isArray(t)){const e=t,r=Object.keys(e);if(r.length>0){const t=n=>"string"==typeof n?n:"number"==typeof n||"boolean"==typeof n?String(n):JSON.stringify(n);return`${n}(${r.map((n=>`${n} = ${t(e[n])}`)).join(", ")})`}}return n}}return JSON.stringify(n)}function h(r){if(Array.isArray(r)){const t=r.map(((n,r)=>e("span",{children:h(n)},r)));return n("code",{children:["[",g(t),"]"]})}return e("code","object"==typeof r&&null!==r?{children:JSON.stringify(r)}:"string"==typeof r?{children:f(r)}:{children:String(r)})}function m(r,t){const o="added"===t?"changed-element":"removed"===t?"removed-element":void 0;if(Array.isArray(r)){if(r.every((n=>!Array.isArray(n)))){const t=[];r.forEach(((n,e)=>{t.push(h(n)),e<r.length-1&&t.push(", ")}));const a=n("code",{children:["(",t,")"]});return o?e("span",{className:o,children:a}):a}{const n=h(r);return o?e("span",{className:o,children:n}):n}}return b(r)}function b(r,t){if(Array.isArray(r)){if(0===r.length&&(!t||0===t.length))return e("code",{children:"[]"});if(t&&t.length>0){return t.some((n=>Array.isArray(n.element)))?e("ul",{className:"list",children:t.map(((n,r)=>e("li",{children:m(n.element,n.status)},r)))}):function(r){const t=[];return r.forEach(((n,o)=>{const a=h(n.element),i="added"===n.status?"changed-element":"removed"===n.status?"removed-element":void 0;t.push(e("span",i?{className:i,children:a}:{children:a},o)),o<r.length-1&&t.push(e("span",{children:", "},`comma-${o}`))})),n("code",{children:["[",t,"]"]})}(t)}return r.some(Array.isArray)?e("ul",{className:"list",children:r.map(((n,r)=>e("li",{children:m(n)},r)))}):function(r){const t=[];return r.forEach(((n,o)=>{t.push(e("span",{children:h(n)},o)),o<r.length-1&&t.push(e("span",{children:", "},`comma-${o}`))})),n("code",{children:["[",t,"]"]})}(r)}return e("code","object"==typeof r&&null!==r?{children:JSON.stringify(r)}:"string"==typeof r?{children:f(r)}:{children:String(r)})}function y(n,e){const{theoryExtras:r,remainingExtras:t}=function(n){const e={},r={};if(n)for(const[t,o]of Object.entries(n))t.includes(".")?e[t]=o:r[t]=o;return{theoryExtras:e,remainingExtras:r}}(e);return{combinedTheory:{...n,...r},remainingExtraVals:t}}const k=({instantiation:r,prefix:t})=>r&&0!==Object.keys(r).length?n("div",{className:`${t}-instantiation-row`,children:[e("span",{className:`${t}-instantiation-label`,children:"Instantiation"}),e("div",{className:`${t}-instantiation-values`,children:Object.entries(r).map((([r,o])=>n("span",{className:`${t}-instantiation-item`,children:[e("span",{className:`${t}-instantiation-key`,children:r}),e("span",{className:`${t}-instantiation-eq`,children:"="}),e("span",{className:`${t}-instantiation-val`,children:String(o)})]},r)))})]}):null,w=({k:r,v:t,changeInfo:o})=>{const a="full"===o?.type||"array"===o?.type,i="array"===o?.type?o.mergedView:void 0;return n("div",{className:"cex-kv-row "+(a?"changed":""),children:[e("div",{className:"cex-kv-key",children:e("code",{children:r})}),e("div",{className:"cex-kv-sep",children:"â†¦"}),e("div",{className:"cex-kv-val",children:b(t,i)})]})},N=({title:r,fields:t,changes:o,statusIndicator:a})=>{const i=Object.entries(t);return n("div",{className:"cex-state-panel",children:[n("div",{className:"cex-state-header",children:[e("span",{children:r}),a&&e("span",{className:"cex-state-status",children:a})]}),e("div",{className:"cex-state-body",children:0===i.length?e("div",{className:"cex-empty-state",children:"No fields"}):e("div",{className:"cex-kv-table",children:i.map((([n,r])=>e(w,{k:n,v:r,changeInfo:o?.get(n)},n)))})})]})},$=({title:r,fields:o,defaultExpanded:a=!1})=>{const[i,s]=t.useState(a),c=Object.entries(o);return n("div",{className:"cex-theory-panel",children:[n("div",{className:"cex-theory-header",onClick:()=>s(!i),children:[e("span",{className:"cex-theory-toggle",children:i?"â–¼":"â–¶"}),e("span",{className:"cex-theory-label",children:r}),n("span",{className:"cex-theory-count",children:["(",c.length," ",1===c.length?"field":"fields",")"]})]}),i&&e("div",{className:"cex-theory-body",children:0===c.length?e("div",{className:"cex-empty-state",children:"No fields"}):e("div",{className:"cex-kv-table",children:c.map((([n,r])=>e(w,{k:n,v:r},n)))})})]})},S=({data:o,property:a,headerRightContent:i})=>{const{theory:s,preState:c,postState:d,label:l,instantiation:g,extraVals:v}=o,[f,h]=t.useState(!1),[m,b]=t.useState(new Set),[w,S]=t.useState(!1),[M,z]=t.useState(!0),j=t.useRef(null);t.useEffect((()=>{const n=j.current;if(!n)return;const e=new ResizeObserver((n=>{for(const e of n)z(e.contentRect.width>=600)}));return e.observe(n),()=>e.disconnect()}),[]);const C=t.useMemo((()=>{const n=new Set;for(const e of Object.keys(c))n.add(e);if(d)for(const e of Object.keys(d))n.add(e);return Array.from(n).sort()}),[c,d]),B=d?function(n,e){const r=new Map;if(!n)return r;const t=new Set([...Object.keys(n),...Object.keys(e)]);for(const o of t){if(!(o in n)||!(o in e)){r.set(o,{type:"full"});continue}const t=n[o],a=e[o];if(!p(t,a))if(Array.isArray(t)&&Array.isArray(a)){const n=u(t,a);n.some((n=>"unchanged"!==n.status))&&r.set(o,{type:"array",mergedView:n})}else r.set(o,{type:"full"})}return r}(c,d):new Map,E=t.useMemo((()=>{const n={};for(const[e,r]of Object.entries(c))m.has(e)||(n[e]=r);return n}),[c,m]),F=t.useMemo((()=>{if(!d)return null;const n={};for(const[e,r]of Object.entries(d))m.has(e)||(n[e]=r);return n}),[d,m]),A=t.useMemo((()=>{const n=new Map;for(const[e,r]of B)if(!m.has(e))if(f||"array"!==r.type)n.set(e,r);else{const t=r.mergedView.filter((n=>"removed"!==n.status));n.set(e,{type:"array",mergedView:t})}return n}),[B,m,f]),{combinedTheory:O,remainingExtraVals:R}=t.useMemo((()=>y(s,v)),[s,v]);return t.useEffect((()=>{const n=n=>{"Escape"!==n.key?n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||("r"===n.key||"R"===n.key?(n.preventDefault(),h((n=>!n))):"f"!==n.key&&"F"!==n.key||(n.preventDefault(),S((n=>!n)))):S(!1)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)}),[]),n("div",{className:"cex-structured-view",ref:j,children:[n("div",{className:"cex-header-row",children:[n("div",{className:"cex-header-left",children:[e("span",{className:"cex-header-label",children:"Counterexample"}),n("button",{className:"cex-toolbar-btn "+(m.size>0?"cex-filter-active":""),onClick:n=>{n.stopPropagation(),S(!w)},title:"Filter visible fields (F)",children:["Filter fields ",m.size>0?`(${m.size} hidden)`:""," (F)"]}),e("button",{className:"cex-toolbar-btn",onClick:n=>{n.stopPropagation(),h(!f)},title:"Show/hide removed elements (R)",children:f?"Hide removals (R)":"Show removals (R)"})]}),i&&e("div",{className:"cex-header-right",children:i})]}),g&&Object.keys(g).length>0&&e(k,{instantiation:g,prefix:"cex"}),Object.keys(O).length>0&&e($,{title:"Theory",fields:O,defaultExpanded:!0}),M&&e("div",{className:"cex-action-row",children:e("span",{className:"cex-action-chip",children:x(l)})}),n("div",{className:"cex-states-container "+(M?"":"cex-states-stacked"),children:[e(N,{title:"Pre-State",fields:E,statusIndicator:e("span",{className:"cex-status-valid",children:"âœ“ Satisfies all invariants "})}),!M&&F&&e("div",{className:"cex-narrow-action",children:e("span",{className:"cex-action-chip",children:x(l)})}),F&&e(N,{title:"Post-State",fields:F,changes:A,statusIndicator:n("span",{className:"cex-status-invalid",children:["âœ— Violates ",e("span",{className:"cex-property-name",children:a})]})})]}),Object.keys(R).length>0&&e($,{title:"Extra Values",fields:R}),w&&n(r,{children:[e("div",{className:"cex-filter-backdrop",onClick:()=>S(!1)}),n("div",{className:"cex-filter-panel",children:[n("div",{className:"cex-filter-header",children:[e("span",{children:"Visible Fields"}),n("div",{className:"cex-filter-actions",children:[e("button",{className:"cex-filter-action",onClick:()=>b(new Set),children:"Show all"}),e("button",{className:"cex-filter-action",onClick:()=>b(new Set(C)),children:"Hide all"}),e("button",{className:"cex-filter-close",onClick:()=>S(!1),title:"Close (Esc)",children:"Ã—"})]})]}),e("div",{className:"cex-filter-list",children:C.map((r=>n("label",{className:"cex-filter-item",children:[e("input",{type:"checkbox",checked:!m.has(r),onChange:()=>{return n=r,void b((e=>{const r=new Set(e);return r.has(n)?r.delete(n):r.add(n),r}));var n}}),e("span",{children:r})]},r)))})]})]})]})};function M(n){switch(n){case"proven":return"âœ…";case"disproven":return"âŒ";case"unknown":return"â“";case"error":return"ðŸ’¥";case null:return e("span",{className:"spinner",children:"â³"});default:return"â­•"}}function z(n){return"induction"===n.metadata.type?n.metadata.data:null}function j(t){const o="all"===t?"All":t.charAt(0).toUpperCase()+t.slice(1);switch(t){case"all":default:return o;case"pending":return n(r,{children:[e("span",{className:"spinner-small",children:"â³"})," ",o]});case"proven":return n(r,{children:["âœ… ",o]});case"disproven":return n(r,{children:["âŒ ",o]});case"unknown":return n(r,{children:["â“ ",o]});case"error":return n(r,{children:["ðŸ’¥ ",o]})}}const C=({vc:o,alternativeVC:a})=>{const[i,s]=t.useState(!1),[c,d]=t.useState(!0),[p,u]=t.useState(!1),g=n=>null===n?null:n<1e3?`${n}ms`:`${(n/1e3).toFixed(2)}s`,v=a&&!a.isDormant&&null===a.status,f=a&&!a.isDormant&&null!==a.status,x=v||f,h=n=>{if("disproven"!==n.status)return null;for(const e of n.timing.dischargers){const n=e.result?.data?.counterexamples;if(n&&n.length>0)return n[0]}return null},m=h(o),b=a?h(a):null,y=null!==m,k=null!==b,w=y||k,N=y&&k,$=c&&b||m,j=function(n){const e=[];for(const r of n.timing.dischargers){if("object"==typeof r.status&&null!==r.status){const n=r.status.finished;n?.res?.exceptions&&e.push(...n.res.exceptions)}r.result?.exceptions&&e.push(...r.result.exceptions)}return e}(o),C=j.length>0,B=w||C,E=(()=>{const t=g(o.timing.totalTime);if(v)return t?n(r,{children:[t,"+",e("span",{className:"spinner-inline",children:"â³"})]}):e("span",{className:"spinner-inline",children:"â³"});if(f&&null!==a.timing.totalTime){const n=g(a.timing.totalTime);return t&&n?`${t}+${n}`:n||t}return t})();return n(r,{children:[n("div",{className:`property-row status-${F=o.status,F||"pending"} ${B?"expandable":""}`,onClick:()=>B&&s(!i),style:{cursor:B?"pointer":"default"},children:[B&&e("span",{className:"property-toggle",children:i?"â–¼":"â–¶"}),e("span",{className:"property-icon",children:M(o.status)}),e("span",{className:"property-name",children:z(o)?.property}),x&&n("span",{className:"vc-style-badge tr-badge "+(v?"tr-running":""),children:["TR",v&&"..."]}),E&&e("span",{className:"property-time",children:E})]}),i&&C&&n("div",{className:"exceptions-container",children:[e("div",{className:"exceptions-label",children:"Exceptions"}),e("div",{className:"exceptions-content",children:j.map(((n,r)=>e("pre",{className:"exception-item",children:n},r)))})]}),i&&$&&e("div",{className:"counterexample-container",children:$.structuredJson&&!p?e(S,{data:$.structuredJson,property:z(o)?.property??"",headerRightContent:n(r,{children:[e("button",{className:"cex-view-toggle",onClick:n=>{n.stopPropagation(),u(!p)},children:"Show raw model"}),N&&n("div",{className:"counterexample-toggle",children:[e("button",{className:"cex-toggle-btn "+(c?"active":""),onClick:n=>{n.stopPropagation(),d(!0)},children:"TR"}),e("button",{className:"cex-toggle-btn "+(c?"":"active"),onClick:n=>{n.stopPropagation(),d(!1)},children:"WP"})]})]})}):n(r,{children:[n("div",{className:"counterexample-header",children:[e("div",{className:"counterexample-label",children:"Counterexample"}),n("div",{className:"counterexample-toggles",children:[$.structuredJson&&e("button",{className:"cex-view-toggle",onClick:n=>{n.stopPropagation(),u(!p)},children:"Show structured"}),N&&n("div",{className:"counterexample-toggle",children:[e("button",{className:"cex-toggle-btn "+(c?"active":""),onClick:n=>{n.stopPropagation(),d(!0)},children:"TR"}),e("button",{className:"cex-toggle-btn "+(c?"":"active"),onClick:n=>{n.stopPropagation(),d(!1)},children:"WP"})]})]})]}),e("div",{className:"counterexample-content",children:"string"==typeof $.html?e("span",{dangerouslySetInnerHTML:{__html:$.html}}):e(l,{html:$.html})})]})})]});var F},B=({action:r,vcs:o,alternativeMap:a})=>{const[i,s]=t.useState(!0);return n("div",{className:"action-section",children:[n("div",{className:"action-header",onClick:()=>s(!i),children:[e("span",{className:"action-toggle",children:i?"â–¼":"â–¶"}),e("span",{className:"action-name",children:r})]}),i&&e("div",{className:"action-properties",children:o.map((n=>e(C,{vc:n,alternativeVC:a.get(n.id)},n.id)))})]})},E=({results:o})=>{const[a,i]=t.useState("all"),[s,c]=t.useState(!1),d=t.useMemo((()=>{const n=(n,e)=>{const r=n.replace("#","");return`rgba(${parseInt(r.substring(0,2),16)}, ${parseInt(r.substring(2,4),16)}, ${parseInt(r.substring(4,6),16)}, ${e})`};return{proven:{border:"#52c41a",bg:n("#52c41a",.1)},disproven:{border:"#ff4d4f",bg:n("#ff4d4f",.1)},error:{border:"#fa8c16",bg:n("#fa8c16",.1)},unknown:{border:"#1890ff",bg:n("#1890ff",.1)},pending:{border:"#d9d9d9",bg:n("#d9d9d9",.05)}}}),[]),l=t.useMemo((()=>function(n){const e=new Map;for(const r of n)null!=r.alternativeFor&&e.set(r.alternativeFor,r);return e}(o.vcs)),[o.vcs]),p=t.useMemo((()=>o.vcs.filter((n=>null==n.alternativeFor&&function(n){return"induction"===n.metadata.type}(n)))),[o.vcs]),u=t.useMemo((()=>{const n={all:p.length,pending:0,proven:0,disproven:0,unknown:0,error:0};return p.forEach((e=>{null===e.status?n.pending++:"proven"===e.status?n.proven++:"disproven"===e.status?n.disproven++:"unknown"===e.status?n.unknown++:"error"===e.status&&n.error++})),n}),[p]),g=t.useMemo((()=>"all"===a?p:"pending"===a?p.filter((n=>null===n.status)):p.filter((n=>n.status===a))),[p,a]),f=t.useMemo((()=>function(n){const e=new Map;for(const r of n){const n=z(r);if(!n)continue;const t=n.action;e.has(t)||e.set(t,[]),e.get(t).push(r)}return e}(g)),[g]),x=f.get("initializer")||[],h=Array.from(f.entries()).filter((([n])=>"initializer"!==n)),m=t.useMemo((()=>{return`\n    .vr-root {\n      font-family: system-ui, -apple-system, sans-serif;\n      max-width: 100%;\n      padding: 16px;\n      background: var(--vscode-editor-background);\n      border-radius: 8px;\n    }\n\n    .vr-filters {\n      display: flex;\n      gap: 8px;\n      margin-bottom: 16px;\n      padding: 12px;\n      background: var(--vscode-editorWidget-background);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      flex-wrap: wrap;\n      align-items: center;\n    }\n\n    .vr-filter-label {\n      font-weight: 600;\n      font-size: 14px;\n      color: var(--vscode-foreground);\n    }\n\n    .vr-filter-button {\n      padding: 6px 12px;\n      border: 1px solid var(--vscode-panel-border);\n      background: var(--vscode-editorWidget-background);\n      color: var(--vscode-foreground);\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 13px;\n      transition: all 0.2s;\n    }\n\n    .vr-filter-button:hover {\n      background: var(--vscode-list-hoverBackground);\n      border-color: var(--vscode-panel-border);\n    }\n\n    .vr-filter-button.active {\n      background: var(--vscode-button-background);\n      color: var(--vscode-button-foreground);\n      border-color: var(--vscode-button-background);\n    }\n\n    .vr-section {\n      margin-bottom: 24px;\n      background: var(--vscode-editorWidget-background);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      overflow: hidden;\n    }\n\n    .vr-section-title {\n      font-weight: 600;\n      font-size: 16px;\n      padding: 12px 16px;\n      background: var(--vscode-editorGroupHeader-tabsBackground);\n      border-bottom: 1px solid var(--vscode-panel-border);\n      color: var(--vscode-foreground);\n    }\n\n    .vr-section-content {\n      padding: 12px;\n    }\n\n    .action-section {\n      margin-bottom: 12px;\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 4px;\n      overflow: hidden;\n    }\n\n    .action-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 10px 12px;\n      background: var(--vscode-editorWidget-background);\n      cursor: pointer;\n      user-select: none;\n      transition: background 0.2s;\n    }\n\n    .action-header:hover {\n      background: var(--vscode-list-hoverBackground);\n    }\n\n    .action-toggle {\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n    }\n\n    .action-name {\n      font-weight: 600;\n      font-size: 14px;\n      color: var(--vscode-foreground);\n    }\n\n    .action-properties {\n      padding: 8px 12px 8px 32px;\n      background: var(--vscode-editorWidget-background);\n    }\n\n    .property-row {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 8px;\n      margin: 2px 0;\n      border-radius: 4px;\n      transition: background 0.15s;\n    }\n\n    .property-row:hover {\n      background: var(--vscode-list-hoverBackground);\n    }\n\n    .property-icon {\n      font-size: 16px;\n      flex-shrink: 0;\n    }\n\n    .property-name {\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-size: 13px;\n      color: var(--vscode-editor-foreground);\n      flex-grow: 1;\n    }\n\n    .property-time {\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-size: 12px;\n      margin-left: auto;\n      padding: 2px 6px;\n      background: var(--vscode-editorWidget-background);\n      color: var(--vscode-descriptionForeground);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      white-space: nowrap;\n    }\n\n    .property-row.status-proven {\n      background: ${d.proven.bg};\n      border-left: 3px solid ${d.proven.border};\n    }\n\n    .property-row.status-disproven {\n      background: ${d.disproven.bg};\n      border-left: 3px solid ${d.disproven.border};\n    }\n\n    .property-row.status-error {\n      background: ${d.error.bg};\n      border-left: 3px solid ${d.error.border};\n    }\n\n    .property-row.status-unknown {\n      background: ${d.unknown.bg};\n      border-left: 3px solid ${d.unknown.border};\n    }\n\n    .property-row.status-pending {\n      background: ${d.pending.bg};\n      border-left: 3px solid ${d.pending.border};\n    }\n\n    .spinner {\n      display: inline-block;\n      animation: spin 2s linear infinite;\n    }\n\n    .spinner-small {\n      display: inline-block;\n      font-size: 14px;\n    }\n\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n    .vr-empty {\n      padding: 24px;\n      text-align: center;\n      color: var(--vscode-disabledForeground);\n      font-style: italic;\n    }\n\n    .property-row.expandable:hover {\n      background: var(--vscode-list-activeSelectionBackground);\n      opacity: 0.9;\n    }\n\n    .property-toggle {\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      margin-right: 4px;\n      flex-shrink: 0;\n    }\n\n    .counterexample-container {\n      margin-left: 32px;\n      margin-top: 8px;\n      margin-bottom: 8px;\n      padding: 12px;\n      background: var(--vscode-editorWidget-background);\n      border-left: 3px solid #ff4d4f;\n      border-radius: 4px;\n      overflow-x: auto;\n    }\n\n    .counterexample-label {\n      font-weight: 600;\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      margin-bottom: 8px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .counterexample-content {\n      font-size: 13px;\n      color: var(--vscode-editor-foreground);\n    }\n\n    .exceptions-container {\n      margin-left: 32px;\n      margin-top: 8px;\n      margin-bottom: 8px;\n      padding: 12px;\n      background: var(--vscode-editorWidget-background);\n      border-left: 3px solid #fa8c16;\n      border-radius: 4px;\n      overflow-x: auto;\n    }\n\n    .exceptions-label {\n      font-weight: 600;\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      margin-bottom: 8px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .exceptions-content {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .exception-item {\n      margin: 0;\n      padding: 8px 12px;\n      background: var(--vscode-inputValidation-errorBackground, rgba(250, 140, 22, 0.1));\n      border: 1px solid var(--vscode-inputValidation-errorBorder, #fa8c16);\n      border-radius: 4px;\n      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;\n      font-size: 12px;\n      color: var(--vscode-editor-foreground);\n      white-space: pre-wrap;\n      word-break: break-word;\n      overflow-wrap: break-word;\n    }\n\n    .counterexample-column-header {\n      text-align: left;\n    }\n\n    .counterexample-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .counterexample-toggle {\n      display: flex;\n      gap: 4px;\n    }\n\n    .cex-toggle-btn {\n      padding: 2px 8px;\n      font-size: 11px;\n      font-weight: 500;\n      border: 1px solid var(--vscode-panel-border);\n      background: var(--vscode-editorWidget-background);\n      color: var(--vscode-foreground);\n      border-radius: 3px;\n      cursor: pointer;\n      transition: all 0.15s;\n    }\n\n    .cex-toggle-btn:hover {\n      background: var(--vscode-list-hoverBackground);\n    }\n\n    .cex-toggle-btn.active {\n      background: var(--vscode-button-background);\n      color: var(--vscode-button-foreground);\n      border-color: var(--vscode-button-background);\n    }\n\n    .vc-style-badge {\n      font-size: 10px;\n      font-weight: 600;\n      padding: 2px 6px;\n      border-radius: 3px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      flex-shrink: 0;\n    }\n\n    .tr-badge {\n      background: rgba(24, 144, 255, 0.15);\n      color: #1890ff;\n      border: 1px solid rgba(24, 144, 255, 0.3);\n    }\n\n    .tr-badge.tr-running {\n      animation: pulse 1.5s ease-in-out infinite;\n    }\n\n    @keyframes pulse {\n      0%, 100% {\n        opacity: 1;\n        background: rgba(24, 144, 255, 0.15);\n      }\n      50% {\n        opacity: 0.7;\n        background: rgba(24, 144, 255, 0.3);\n      }\n    }\n\n    .spinner-inline {\n      display: inline-block;\n      animation: spin 2s linear infinite;\n    }\n\n    .vr-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      padding: 4px 0;\n      margin-bottom: 8px;\n    }\n\n    ${n="vr",`\n  .${n}-toggle-link {\n    font-size: 11px;\n    color: var(--vscode-textLink-foreground);\n    cursor: pointer;\n    text-decoration: none;\n    background: none;\n    border: none;\n    padding: 2px 6px;\n    border-radius: 3px;\n  }\n  .${n}-toggle-link:hover {\n    text-decoration: underline;\n    background: var(--vscode-toolbar-hoverBackground);\n  }\n`}\n    ${function(n){return`\n  .${n}-json-view {\n    position: relative;\n    background: var(--vscode-editor-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 6px;\n    max-height: 600px;\n  }\n  .${n}-json-content {\n    padding: 12px;\n    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;\n    font-size: 12px;\n    white-space: pre;\n    overflow: auto;\n    max-height: 600px;\n  }\n  .${n}-copy-button {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 11px;\n    color: var(--vscode-button-foreground);\n    background: var(--vscode-button-background);\n    border: none;\n    border-radius: 4px;\n    padding: 4px 8px;\n    cursor: pointer;\n    transition: background 0.15s, opacity 0.15s;\n    opacity: 0;\n  }\n  .${n}-json-view:hover .${n}-copy-button,\n  .${n}-json-content:hover ~ .${n}-copy-button {\n    opacity: 1;\n  }\n  .${n}-copy-button:hover {\n    background: var(--vscode-button-hoverBackground);\n  }\n  .${n}-copy-button svg {\n    width: 14px;\n    height: 14px;\n  }\n`}("vr")}\n\n    /* Structured counterexample styles */\n    .counterexample-toggles {\n      display: flex;\n      gap: 12px;\n      align-items: center;\n    }\n\n    .cex-view-toggle {\n      font-size: 11px;\n      color: var(--vscode-textLink-foreground);\n      cursor: pointer;\n      text-decoration: none;\n      background: none;\n      border: none;\n      padding: 2px 6px;\n      border-radius: 3px;\n    }\n\n    .cex-view-toggle:hover {\n      text-decoration: underline;\n      background: var(--vscode-toolbar-hoverBackground);\n    }\n\n    .cex-structured-view {\n      font-family: system-ui, -apple-system, sans-serif;\n    }\n\n    .cex-header-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n\n    .cex-header-left {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    .cex-header-right {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    .cex-header-label {\n      font-weight: 600;\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    ${function(n){return`\n  .${n}-instantiation-row {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    margin-bottom: 12px;\n    padding: 8px 12px;\n    background: var(--vscode-editorWidget-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 6px;\n  }\n  .${n}-instantiation-label {\n    font-size: 10px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--vscode-descriptionForeground);\n    flex-shrink: 0;\n  }\n  .${n}-instantiation-values {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  .${n}-instantiation-item {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 3px 10px;\n    background: var(--vscode-activityBarBadge-background);\n    color: var(--vscode-activityBarBadge-foreground);\n    border-radius: 12px;\n    font-size: 12px;\n  }\n  .${n}-instantiation-key {\n    color: var(--vscode-activityBarBadge-foreground);\n    font-weight: 500;\n  }\n  .${n}-instantiation-eq {\n    color: var(--vscode-activityBarBadge-foreground);\n    opacity: 0.6;\n  }\n  .${n}-instantiation-val {\n    color: var(--vscode-activityBarBadge-foreground);\n    font-weight: 500;\n  }\n`}("cex")}\n\n    .cex-action-chip {\n      display: inline-block;\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-size: 12px;\n      font-weight: 600;\n      background: var(--vscode-activityBarBadge-background, #007acc);\n      color: var(--vscode-activityBarBadge-foreground, #fff);\n      border-radius: 999px;\n      padding: 4px 12px;\n      line-height: 1.4;\n    }\n\n    .cex-states-container {\n      display: flex;\n      gap: 16px;\n      flex-wrap: wrap;\n    }\n\n    .cex-states-container.cex-states-stacked {\n      flex-direction: column;\n    }\n\n    .cex-narrow-action {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      padding: 8px 0;\n      width: 100%;\n    }\n\n    .cex-action-row {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      padding: 12px 0;\n      margin-bottom: 12px;\n    }\n\n    .cex-state-panel {\n      flex: 1;\n      min-width: 280px;\n      max-width: 100%;\n      background: var(--vscode-editor-background);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      overflow: hidden;\n    }\n\n    .cex-state-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-weight: 600;\n      font-size: 12px;\n      padding: 8px 12px;\n      background: var(--vscode-editorGroupHeader-tabsBackground);\n      border-bottom: 1px solid var(--vscode-panel-border);\n      color: var(--vscode-foreground);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .cex-state-status {\n      font-size: 10px;\n      font-weight: 500;\n      text-transform: none;\n      letter-spacing: normal;\n    }\n\n    .cex-status-valid {\n      color: var(--vscode-testing-iconPassed, #4caf50);\n    }\n\n    .cex-status-invalid {\n      color: var(--vscode-testing-iconFailed, #f44336);\n    }\n\n    .cex-property-name {\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-weight: 600;\n    }\n\n    .cex-state-body {\n      padding: 8px;\n    }\n\n    .cex-empty-state {\n      padding: 12px;\n      text-align: center;\n      color: var(--vscode-disabledForeground);\n      font-style: italic;\n      font-size: 12px;\n    }\n\n    .cex-kv-table {\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 4px;\n      overflow: hidden;\n    }\n\n    .cex-kv-row {\n      display: grid;\n      grid-template-columns: minmax(80px, auto) auto 1fr;\n      gap: 8px;\n      padding: 6px 10px;\n      align-items: baseline;\n      border-bottom: 1px solid var(--vscode-panel-border);\n      background: var(--vscode-editorWidget-background);\n      transition: background-color 0.15s ease, border-left-color 0.15s ease;\n      border-left: 3px solid transparent;\n    }\n\n    .cex-kv-row:last-child {\n      border-bottom: none;\n    }\n\n    .cex-kv-row.changed {\n      background: var(--vscode-editor-findMatchHighlightBackground, rgba(255, 213, 0, 0.15));\n      border-left: 3px solid var(--vscode-editor-findMatchHighlightBorder, #ffd500);\n    }\n\n    .cex-kv-key {\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-size: 11px;\n      word-break: break-all;\n    }\n\n    .cex-kv-key code {\n      background: transparent;\n      padding: 0;\n      color: var(--vscode-foreground);\n    }\n\n    .cex-kv-sep {\n      color: var(--vscode-descriptionForeground);\n      font-size: 11px;\n    }\n\n    .cex-kv-val {\n      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n      font-size: 11px;\n      word-break: break-all;\n    }\n\n    .cex-kv-val code {\n      background: transparent;\n      padding: 0;\n      color: var(--vscode-foreground);\n    }\n\n    \n  .changed-element {\n    background: var(--vscode-diffEditor-insertedTextBackground, rgba(0, 255, 0, 0.2));\n    border-radius: 3px;\n    padding: 2px 4px;\n    box-shadow: 0 0 0 2px var(--vscode-diffEditor-insertedLineBackground, rgba(0, 255, 0, 0.3));\n    color: var(--vscode-editor-foreground);\n  }\n  .removed-element {\n    background: var(--vscode-diffEditor-removedTextBackground, rgba(255, 0, 0, 0.2));\n    border-radius: 3px;\n    padding: 2px 4px;\n    box-shadow: 0 0 0 2px var(--vscode-diffEditor-removedLineBackground, rgba(255, 0, 0, 0.3));\n    color: var(--vscode-editor-foreground);\n    text-decoration: line-through;\n    opacity: 0.8;\n  }\n\n    \n  ul.list {\n    margin: 4px 0 0 0;\n    padding: 0;\n    list-style: none;\n  }\n  ul.list li {\n    font-family: var(--mono, ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace);\n    font-size: 11px;\n    line-height: 1.4;\n    background: transparent;\n    color: var(--vscode-foreground);\n    margin: 2px 0;\n  }\n\n\n    .cex-toolbar {\n      display: flex;\n      gap: 12px;\n    }\n\n    .cex-toolbar-btn {\n      font-size: 11px;\n      color: var(--vscode-textLink-foreground);\n      cursor: pointer;\n      text-decoration: none;\n      background: none;\n      border: none;\n      padding: 2px 6px;\n      border-radius: 3px;\n    }\n\n    .cex-toolbar-btn:hover {\n      text-decoration: underline;\n      background: var(--vscode-toolbar-hoverBackground);\n    }\n\n    ${function(n){return`\n  .${n}-filter-active {\n    color: var(--vscode-notificationsInfoIcon-foreground, #3794ff);\n    font-weight: 600;\n  }\n  .${n}-filter-panel {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 1000;\n    min-width: 250px;\n    max-width: 90vw;\n    max-height: 400px;\n    background: var(--vscode-editorWidget-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 8px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    overflow: hidden;\n  }\n  .${n}-filter-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.3);\n    z-index: 999;\n  }\n  .${n}-filter-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px 12px;\n    border-bottom: 1px solid var(--vscode-panel-border);\n    font-weight: 600;\n    font-size: 12px;\n  }\n  .${n}-filter-actions {\n    display: flex;\n    gap: 8px;\n  }\n  .${n}-filter-action {\n    font-size: 10px;\n    color: var(--vscode-textLink-foreground);\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 2px 4px;\n  }\n  .${n}-filter-action:hover {\n    text-decoration: underline;\n  }\n  .${n}-filter-close {\n    font-size: 18px;\n    line-height: 1;\n    color: var(--vscode-foreground);\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 0 4px;\n    margin-left: 8px;\n    opacity: 0.7;\n  }\n  .${n}-filter-close:hover {\n    opacity: 1;\n  }\n  .${n}-filter-list {\n    padding: 8px;\n    max-height: 240px;\n    overflow-y: auto;\n  }\n  .${n}-filter-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 4px;\n    cursor: pointer;\n    border-radius: 3px;\n    font-size: 12px;\n  }\n  .${n}-filter-item:hover {\n    background: var(--vscode-list-hoverBackground);\n  }\n  .${n}-filter-item input {\n    margin: 0;\n  }\n  .${n}-filter-item code {\n    font-size: 11px;\n  }\n`}("cex")}\n\n    /* Theory panel styles (collapsible) */\n    .cex-theory-panel {\n      margin-bottom: 12px;\n      background: var(--vscode-editor-background);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      overflow: hidden;\n    }\n\n    /* Add gap when theory panel follows states container (for Extra Values) */\n    .cex-states-container + .cex-theory-panel {\n      margin-top: 12px;\n    }\n\n    .cex-theory-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--vscode-editorGroupHeader-tabsBackground);\n      cursor: pointer;\n      user-select: none;\n      transition: background 0.2s;\n    }\n\n    .cex-theory-header:hover {\n      background: var(--vscode-list-hoverBackground);\n    }\n\n    .cex-theory-toggle {\n      font-size: 10px;\n      color: var(--vscode-descriptionForeground);\n    }\n\n    .cex-theory-label {\n      font-weight: 600;\n      font-size: 12px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      color: var(--vscode-foreground);\n    }\n\n    .cex-theory-count {\n      font-size: 11px;\n      color: var(--vscode-descriptionForeground);\n    }\n\n    .cex-theory-body {\n      padding: 8px;\n      border-top: 1px solid var(--vscode-panel-border);\n    }\n\n  `;var n}),[d]),b=JSON.stringify(o,null,2);return n(r,{children:[e("style",{children:m}),n("div",{className:"vr-root",children:[e("div",{className:"vr-toolbar",children:e("button",{className:"vr-toggle-link",onClick:()=>c(!s),children:s?"Show formatted":"Show JSON"})}),s?n("div",{className:"vr-json-view",children:[e(v,{text:b,className:"vr-copy-button"}),e("div",{className:"vr-json-content",children:b})]}):n(r,{children:[n("div",{className:"vr-filters",children:[n("span",{className:"vr-filter-label",children:["Filter by status (",o.totalVCs," VCs):"]}),["all","pending","proven","disproven","unknown","error"].map((e=>0===u[e]?null:n("button",{className:"vr-filter-button "+(a===e?"active":""),onClick:()=>i(e),children:[j(e)," (",u[e],")"]},e)))]}),0===g.length?e("div",{className:"vr-empty",children:"No verification conditions match the selected filter."}):n(r,{children:[x.length>0&&n("div",{className:"vr-section",children:[e("div",{className:"vr-section-title",children:"Initialization must establish the invariant:"}),e("div",{className:"vr-section-content",children:e("div",{className:"action-properties",children:x.map((n=>e(C,{vc:n,alternativeVC:l.get(n.id)},n.id)))})})]}),h.length>0&&n("div",{className:"vr-section",children:[e("div",{className:"vr-section-title",children:"The following set of actions must preserve the invariant:"}),e("div",{className:"vr-section-content",children:h.map((([n,r])=>e(B,{action:n,vcs:r,alternativeMap:l},n)))})]})]})]})]})]})};export{E as default};