window;import{jsxs as n,jsx as e,Fragment as r}from"react/jsx-runtime";import*as o from"react";function t(n,e){if(n===e)return!0;if(null==n||null==e)return n===e;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}if("object"==typeof n&&"object"==typeof e){const r=n,o=e,i=Object.keys(r),a=Object.keys(o);if(i.length!==a.length)return!1;for(const n of i){if(!(n in o))return!1;if(!t(r[n],o[n]))return!1}return!0}return!1}function i(n,e){const r=function(n,e){const r=n.length,o=e.length,i=Array.from({length:r+1},(()=>Array(o+1).fill(0)));for(let a=1;a<=r;a++)for(let r=1;r<=o;r++)t(n[a-1],e[r-1])?i[a][r]=i[a-1][r-1]+1:i[a][r]=Math.max(i[a-1][r],i[a][r-1]);const a=[];let s=r,l=o;for(;s>0&&l>0;)t(n[s-1],e[l-1])?(a.unshift([s-1,l-1]),s--,l--):i[s-1][l]>i[s][l-1]?s--:l--;return a}(n,e),o=[];let i=0,a=0,s=0;for(;i<n.length||a<e.length;){const t=s<r.length?r[s]:null;if(t&&i===t[0]&&a===t[1])o.push({element:e[a],status:"unchanged"}),i++,a++,s++;else{const r=t?t[0]:n.length;for(;i<r;)o.push({element:n[i],status:"removed"}),i++;const s=t?t[1]:e.length;for(;a<s;)o.push({element:e[a],status:"added"}),a++}}return o}function a(n,o=", "){const t=[];return n.forEach(((r,i)=>{t.push(e("span",{children:r},`n-${i}`)),i<n.length-1&&t.push(e("span",{children:o},`s-${i}`))})),e(r,{children:t})}const s=({text:t,className:i})=>{const[a,s]=o.useState(!1);return n("button",{className:i,onClick:async()=>{try{await navigator.clipboard.writeText(t),s(!0),setTimeout((()=>s(!1)),2e3)}catch(n){console.error("Failed to copy:",n)}},title:"Copy to clipboard",children:[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a?e("path",{d:"M20 6L9 17l-5-5",strokeLinecap:"round",strokeLinejoin:"round"}):n(r,{children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),a?"Copied!":"Copy JSON"]})};function l(n){return n.trim().split(/\s+/).map((n=>{let e=n.replace(/^[()\[\]{}:,]+|[()\[\]{}:,]+$/g,"");if(/^-?\d+(?:\.\d+)?$/.test(e))return e;if(e.includes(".")){const n=e.split(".");e=n[n.length-1]||e}return e})).filter((n=>n.length>0)).join(" ")}function d(n){if("string"==typeof n)return n;if("object"==typeof n&&null!==n){const e=n,r=Object.keys(e);if(1===r.length){let n=r[0];n.startsWith("_")&&(n=n.slice(1));const o=e[r[0]];if("object"==typeof o&&null!==o&&!Array.isArray(o)){const e=o,r=Object.keys(e);if(r.length>0){const o=n=>"string"==typeof n?n:"number"==typeof n||"boolean"==typeof n?String(n):JSON.stringify(n);return`${n}(${r.map((n=>`${n} = ${o(e[n])}`)).join(", ")})`}}return n}}return JSON.stringify(n)}function c(r){if(Array.isArray(r)){const o=r.map(((n,r)=>e("span",{children:c(n)},r)));return n("code",{children:["[",a(o),"]"]})}return e("code","object"==typeof r&&null!==r?{children:JSON.stringify(r)}:"string"==typeof r?{children:l(r)}:{children:String(r)})}function p(r,o){const t="added"===o?"changed-element":"removed"===o?"removed-element":void 0;if(Array.isArray(r)){if(r.every((n=>!Array.isArray(n)))){const o=[];r.forEach(((n,e)=>{o.push(c(n)),e<r.length-1&&o.push(", ")}));const i=n("code",{children:["(",o,")"]});return t?e("span",{className:t,children:i}):i}{const n=c(r);return t?e("span",{className:t,children:n}):n}}return u(r)}function u(r,o){if(Array.isArray(r)){if(0===r.length&&(!o||0===o.length))return e("code",{children:"[]"});if(o&&o.length>0){return o.some((n=>Array.isArray(n.element)))?e("ul",{className:"list",children:o.map(((n,r)=>e("li",{children:p(n.element,n.status)},r)))}):function(r){const o=[];return r.forEach(((n,t)=>{const i=c(n.element),a="added"===n.status?"changed-element":"removed"===n.status?"removed-element":void 0;o.push(e("span",a?{className:a,children:i}:{children:i},t)),t<r.length-1&&o.push(e("span",{children:", "},`comma-${t}`))})),n("code",{children:["[",o,"]"]})}(o)}return r.some(Array.isArray)?e("ul",{className:"list",children:r.map(((n,r)=>e("li",{children:p(n)},r)))}):function(r){const o=[];return r.forEach(((n,t)=>{o.push(e("span",{children:c(n)},t)),t<r.length-1&&o.push(e("span",{children:", "},`comma-${t}`))})),n("code",{children:["[",o,"]"]})}(r)}return e("code","object"==typeof r&&null!==r?{children:JSON.stringify(r)}:"string"==typeof r?{children:l(r)}:{children:String(r)})}function g(n,e){const{theoryExtras:r,remainingExtras:o}=function(n){const e={},r={};if(n)for(const[o,t]of Object.entries(n))o.includes(".")?e[o]=t:r[o]=t;return{theoryExtras:e,remainingExtras:r}}(e);return{combinedTheory:{...n,...r},remainingExtraVals:o}}const h=({instantiation:r,prefix:o})=>r&&0!==Object.keys(r).length?n("div",{className:`${o}-instantiation-row`,children:[e("span",{className:`${o}-instantiation-label`,children:"Instantiation"}),e("div",{className:`${o}-instantiation-values`,children:Object.entries(r).map((([r,t])=>n("span",{className:`${o}-instantiation-item`,children:[e("span",{className:`${o}-instantiation-key`,children:r}),e("span",{className:`${o}-instantiation-eq`,children:"="}),e("span",{className:`${o}-instantiation-val`,children:String(t)})]},r)))})]}):null;function f(n){if(Array.isArray(n))return n.length>0&&Array.isArray(n[0])?`Array(${n.length}) of tuples`:`Array(${n.length})`;if("object"==typeof n&&null!==n)try{return JSON.stringify(n).slice(0,80)+"â€¦"}catch{return"[object]"}if("string"==typeof n){const e=l(n).replace(/\s+/g," ");return e.length>80?e.slice(0,80)+"â€¦":e}return String(n)}const v=({k:r,v:t,changeInfo:i,showRemovals:a=!1,onHideField:s})=>{const l=function(n){return!!Array.isArray(n)||"object"==typeof n&&null!==n||!("string"!=typeof n||!(n.includes("\n")||n.length>60))}(t),d="full"===i?.type||"array"===i?.type,[c,p]=o.useState(!0),g=o.useMemo((()=>{if(!c||"array"!==i?.type)return;const n=i.mergedView;return a?n:n.filter((n=>"removed"!==n.status))}),[c,i,a]);return n("div",{className:`kv-row ${l?"has-toggle":""} ${d?"changed":""}`,children:[e("div",{className:"kv-key "+(s?"kv-key-clickable":""),onClick:n=>{s&&(n.altKey||n.metaKey)&&(n.preventDefault(),s(r))},title:s?"Alt/Cmd-click to hide this field":void 0,children:e("code",{children:r})}),e("div",{className:"kv-sep",children:"â†¦"}),n("div",{className:"kv-val "+(c?"expanded":"collapsed"),children:[l&&e("button",{className:"kv-toggle",type:"button",onClick:()=>p((n=>!n)),"aria-label":c?"Collapse value":"Expand value",title:c?"Collapse":"Expand",children:c?"â–¼":"â–¶"}),e("div",{className:"kv-content",children:c?u(t,g):e("code",{children:f(t)})})]})]})},m=({st:r,highlighted:t=!1,changes:i,showRemovals:a=!1,forceOpen:s=null,hiddenFields:l,onHideField:d,onResetForceOpen:c})=>{const p=!0===r.failing,[u,g]=o.useState(!0);o.useEffect((()=>{null!==s&&g(s)}),[s]);const h=null!==s?s:u,f=Object.entries(r.fields).filter((([n])=>!l?.has(n)));return n("div",{className:`state-card ${t?"is-highlighted":""} ${p?"is-failing":""}`,children:[n("div",{className:"state-header",onClick:()=>{null!==s&&c?(g(!s),c()):g((n=>!n))},children:[e("span",{className:"action-chip",title:r.tag??"",children:r.tag||"(no action)"}),p&&e("span",{className:"failing-badge",children:"FAILED"}),n("span",{className:"state-id",children:["(index: ",r.index,")"]}),e("div",{className:"state-toggle",children:h?"â–¼":"â–¶"})]}),h&&e("div",{className:"state-body",children:e("div",{className:"kv-table",children:f.map((([n,r])=>e(v,{k:n,v:r,changeInfo:i?.get(n),showRemovals:a,onHideField:d},n)))})})]})},x=({title:r,fields:t,defaultExpanded:i=!1})=>{const[a,s]=o.useState(i),l=Object.entries(t);return n("div",{className:"theory-section",children:[n("div",{className:"theory-header",onClick:()=>s((n=>!n)),children:[e("span",{className:"theory-toggle",children:a?"â–¼":"â–¶"}),e("span",{className:"theory-label",children:r})]}),a&&e("div",{className:"theory-content",children:e("div",{className:"kv-table",children:l.map((([n,r])=>e(v,{k:n,v:r},n)))})})]})},b=({theory:n})=>e(x,{title:"Theory",fields:n}),y=({resultType:r,violation:o,exploredStates:t,terminationReason:i})=>{if("cancelled"===r)return n("div",{className:"result-header result-cancelled",children:[e("span",{className:"result-icon",children:"âŠ˜"}),e("span",{className:"result-label",children:"Cancelled"}),e("div",{className:"result-details",children:"Model checking was cancelled before completion"})]});if("found_violation"===r&&o){let r,t;switch(o.kind){case"deadlock":r="ðŸ”’",t="Deadlock Detected";break;case"assertion_failure":r="ðŸ’¥",t="Assertion Failed";break;default:r="âš ï¸",t="Safety Violation Found"}return n("div",{className:"result-header result-violation",children:[e("span",{className:"result-icon",children:r}),e("span",{className:"result-label",children:t}),"safety_failure"===o.kind&&o.violates&&o.violates.length>0&&n("div",{className:"result-details",children:[e("strong",{children:"Violated properties:"})," ",o.violates.join(", ")]}),"assertion_failure"===o.kind&&o.assertion_info&&n("div",{className:"result-details",children:[e("strong",{children:"Location:"})," ",o.assertion_info.moduleName,".",o.assertion_info.procedureName," (line ",o.assertion_info.line,", column ",o.assertion_info.column,")"]})]})}const a=((n,e)=>{const r=void 0!==e?` (explored ${e} states)`:"",o=void 0!==e?`Explored ${e} states`:null;if(!n)return o;if("explored_all_reachable_states"===n.kind)return void 0!==e?`Explored all reachable states (${e})`:"Explored all reachable states";if("early_termination"===n.kind&&n.condition)switch(n.condition.kind){case"found_violating_state":return`Stopped: found violating state${r}`;case"deadlock_occurred":return`Stopped: deadlock occurred${r}`;case"reached_depth_bound":return`Reached depth bound ${n.condition.depth}${r}`;default:return`Early termination${r}`}return o})(i,t);return n("div",{className:"result-header result-success",children:[e("span",{className:"result-icon",children:"âœ“"}),e("span",{className:"result-label",children:"No Violation Found"}),a&&e("div",{className:"result-details",children:e("span",{children:a})})]})};const k=({result:a,layout:l="vertical"})=>{const c="vertical"===l,[p,u]=o.useState(!1),[f,v]=o.useState(!1),[k,w]=o.useState(null),[N,$]=o.useState(new Set),[S,B]=o.useState(!1),j="trace"in a?a.trace:void 0,A=o.useMemo((()=>{if(!j?.states)return[];const n=new Set;for(const e of j.states)for(const r of Object.keys(e.fields))n.add(r);return Array.from(n).sort()}),[j]),E=n=>{$((e=>{const r=new Set(e);return r.has(n)?r.delete(n):r.add(n),r}))};o.useEffect((()=>{const n=n=>{"Escape"!==n.key?n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||p||("r"===n.key||"R"===n.key?(n.preventDefault(),v((n=>!n))):"c"===n.key||"C"===n.key?(n.preventDefault(),w((n=>!1===n))):"f"!==n.key&&"F"!==n.key||(n.preventDefault(),B((n=>!n)))):B(!1)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)}),[p]);const F=`\n    .mc-root {\n      font-family: system-ui, -apple-system, sans-serif;\n      max-width: 100%;\n      overflow: auto;\n    }\n    .mc-trace.vertical {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n      padding: 8px;\n    }\n    .mc-trace.horizontal {\n      display: flex;\n      flex-direction: row;\n      gap: 8px;\n      padding: 8px;\n      overflow-x: auto;\n    }\n    .mc-summary {\n      margin: 12px 8px;\n      padding: 8px 12px;\n      background: var(--vscode-editorWidget-background);\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 4px;\n      max-width: 720px;\n    }\n    .state-card {\n      --border: var(--vscode-panel-border);\n      --header: var(--vscode-editorGroupHeader-tabsBackground);\n      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;\n      background: var(--vscode-editorWidget-background);\n      border: 1px solid var(--border);\n      border-radius: 6px;\n      min-width: 320px;\n      max-width: 720px;\n      box-shadow: 0 1px 2px rgba(0,0,0,.08);\n      overflow: hidden;\n    }\n    .state-card.is-highlighted {\n      outline: 2px solid var(--vscode-editor-selectionHighlightBorder);\n      box-shadow: 0 0 0 3px var(--vscode-editor-selectionBackground);\n    }\n    .state-card.is-failing {\n      outline: 2px solid var(--vscode-inputValidation-errorBorder);\n      box-shadow: 0 0 0 3px var(--vscode-inputValidation-errorBackground);\n    }\n    .state-card.is-failing .state-header {\n      background: var(--vscode-inputValidation-errorBackground);\n    }\n    .failing-badge {\n      display: inline-block;\n      font-family: var(--mono);\n      font-size: 10px;\n      font-weight: 600;\n      background: var(--vscode-inputValidation-errorBorder);\n      color: var(--vscode-editor-background);\n      border-radius: 3px;\n      padding: 2px 6px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n    .state-header {\n      background: var(--header);\n      border-bottom: 1px solid var(--border);\n      padding: 6px 10px;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      font-weight: 600;\n      cursor: pointer;\n    }\n    .state-id {\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      margin-left: auto;\n    }\n    .state-toggle { font-size: 12px; color: var(--vscode-descriptionForeground); user-select: none; }\n    .action-chip {\n      display: inline-block;\n      font-family: var(--mono);\n      font-size: 11px;\n      font-weight: normal;\n      background: var(--vscode-activityBarBadge-background);\n      color: var(--vscode-activityBarBadge-foreground);\n      border: 1px solid var(--vscode-activityBarBadge-foreground);\n      border-radius: 999px;\n      padding: 2px 8px;\n      line-height: 1.4;\n    }\n    .state-body { padding: 10px; }\n    .kv-table {\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      overflow: hidden;\n    }\n    .kv-row {\n      display: grid;\n      grid-template-columns: 1fr auto 2fr;\n      gap: 8px;\n      padding: 4px 10px;\n      align-items: baseline;\n      border-bottom: 1px solid var(--vscode-panel-border);\n      background: var(--vscode-editor-background);\n      transition: background-color .15s ease, border-left-color .15s ease;\n      border-left: 3px solid transparent;\n    }\n    .kv-row:last-child { border-bottom: none; }\n    .kv-row.changed {\n      background: var(--vscode-editor-findMatchHighlightBackground);\n      border-left: 3px solid var(--vscode-editor-findMatchHighlightBorder);\n      color: var(--vscode-editor-foreground);\n    }\n    \n  .changed-element {\n    background: var(--vscode-diffEditor-insertedTextBackground, rgba(0, 255, 0, 0.2));\n    border-radius: 3px;\n    padding: 2px 4px;\n    box-shadow: 0 0 0 2px var(--vscode-diffEditor-insertedLineBackground, rgba(0, 255, 0, 0.3));\n    color: var(--vscode-editor-foreground);\n  }\n  .removed-element {\n    background: var(--vscode-diffEditor-removedTextBackground, rgba(255, 0, 0, 0.2));\n    border-radius: 3px;\n    padding: 2px 4px;\n    box-shadow: 0 0 0 2px var(--vscode-diffEditor-removedLineBackground, rgba(255, 0, 0, 0.3));\n    color: var(--vscode-editor-foreground);\n    text-decoration: line-through;\n    opacity: 0.8;\n  }\n\n    .kv-key {\n      font-family: var(--mono);\n      background: transparent;\n      word-break: break-all;\n      font-size: 11px;\n    }\n    .kv-sep { color: var(--vscode-descriptionForeground); background: transparent; }\n    .kv-val {\n      font-family: var(--mono);\n      font-size: 11px;\n      background: transparent;\n      word-break: break-all;\n      display: flex; align-items: flex-start; gap: 6px;\n    }\n    .kv-toggle {\n      border: none; background: transparent; font-size: 12px; line-height: 1;\n      cursor: pointer; color: var(--vscode-descriptionForeground); padding: 0 2px;\n    }\n    .kv-val.collapsed .kv-content code {\n      white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;\n    }\n    \n  ul.list {\n    margin: 4px 0 0 0;\n    padding: 0;\n    list-style: none;\n  }\n  ul.list li {\n    font-family: var(--mono, ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace);\n    font-size: 11px;\n    line-height: 1.4;\n    background: transparent;\n    color: var(--vscode-foreground);\n    margin: 2px 0;\n  }\n\n    code {\n      background: transparent;\n      color: var(--vscode-foreground);\n      padding: 2px 4px;\n      border-radius: 3px;\n      font-family: var(--mono);\n    }\n    .kv-val.collapsed .kv-content code {\n      white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;\n    }\n    .kv-content { display: block; }\n    .action-chip { cursor: help; }\n    .result-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 16px;\n      margin: 8px;\n      border-radius: 6px;\n      font-weight: 600;\n      flex-wrap: wrap;\n      max-width: 720px;\n    }\n    .result-violation {\n      background: var(--vscode-inputValidation-errorBackground);\n      border: 1px solid var(--vscode-inputValidation-errorBorder);\n      color: var(--vscode-inputValidation-errorForeground, var(--vscode-foreground));\n    }\n    .result-success {\n      background: var(--vscode-inputValidation-infoBackground);\n      border: 1px solid var(--vscode-inputValidation-infoBorder);\n      color: var(--vscode-inputValidation-infoForeground, var(--vscode-foreground));\n    }\n    .result-cancelled {\n      background: var(--vscode-inputValidation-warningBackground);\n      border: 1px solid var(--vscode-inputValidation-warningBorder);\n      color: var(--vscode-inputValidation-warningForeground, var(--vscode-foreground));\n    }\n    .result-icon { font-size: 18px; }\n    .result-label { font-size: 14px; }\n    .result-details {\n      width: 100%;\n      font-size: 12px;\n      font-weight: normal;\n      color: var(--vscode-descriptionForeground);\n      margin-top: 4px;\n    }\n    .theory-section {\n      margin: 8px;\n      border: 1px solid var(--vscode-panel-border);\n      border-radius: 6px;\n      background: var(--vscode-editorWidget-background);\n      max-width: 720px;\n    }\n    .theory-header {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 12px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 13px;\n    }\n    .theory-toggle {\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n    }\n    .theory-label {\n      color: var(--vscode-foreground);\n    }\n    .theory-content {\n      padding: 8px;\n      border-top: 1px solid var(--vscode-panel-border);\n    }\n    .mc-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      gap: 12px;\n      padding: 4px 8px;\n      position: sticky;\n      top: 0;\n      z-index: 50;\n      background: var(--vscode-editorWidget-background);\n      border-bottom: 1px solid var(--vscode-panel-border);\n    }\n    ${z="mc",`\n  .${z}-toggle-link {\n    font-size: 11px;\n    color: var(--vscode-textLink-foreground);\n    cursor: pointer;\n    text-decoration: none;\n    background: none;\n    border: none;\n    padding: 2px 6px;\n    border-radius: 3px;\n  }\n  .${z}-toggle-link:hover {\n    text-decoration: underline;\n    background: var(--vscode-toolbar-hoverBackground);\n  }\n`}\n    ${function(n){return`\n  .${n}-filter-active {\n    color: var(--vscode-notificationsInfoIcon-foreground, #3794ff);\n    font-weight: 600;\n  }\n  .${n}-filter-panel {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 1000;\n    min-width: 250px;\n    max-width: 90vw;\n    max-height: 400px;\n    background: var(--vscode-editorWidget-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 8px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    overflow: hidden;\n  }\n  .${n}-filter-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.3);\n    z-index: 999;\n  }\n  .${n}-filter-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px 12px;\n    border-bottom: 1px solid var(--vscode-panel-border);\n    font-weight: 600;\n    font-size: 12px;\n  }\n  .${n}-filter-actions {\n    display: flex;\n    gap: 8px;\n  }\n  .${n}-filter-action {\n    font-size: 10px;\n    color: var(--vscode-textLink-foreground);\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 2px 4px;\n  }\n  .${n}-filter-action:hover {\n    text-decoration: underline;\n  }\n  .${n}-filter-close {\n    font-size: 18px;\n    line-height: 1;\n    color: var(--vscode-foreground);\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 0 4px;\n    margin-left: 8px;\n    opacity: 0.7;\n  }\n  .${n}-filter-close:hover {\n    opacity: 1;\n  }\n  .${n}-filter-list {\n    padding: 8px;\n    max-height: 240px;\n    overflow-y: auto;\n  }\n  .${n}-filter-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 4px;\n    cursor: pointer;\n    border-radius: 3px;\n    font-size: 12px;\n  }\n  .${n}-filter-item:hover {\n    background: var(--vscode-list-hoverBackground);\n  }\n  .${n}-filter-item input {\n    margin: 0;\n  }\n  .${n}-filter-item code {\n    font-size: 11px;\n  }\n`}("mc")}\n    ${function(n){return`\n  .${n}-instantiation-row {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    margin-bottom: 12px;\n    padding: 8px 12px;\n    background: var(--vscode-editorWidget-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 6px;\n  }\n  .${n}-instantiation-label {\n    font-size: 10px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--vscode-descriptionForeground);\n    flex-shrink: 0;\n  }\n  .${n}-instantiation-values {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  .${n}-instantiation-item {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 3px 10px;\n    background: var(--vscode-activityBarBadge-background);\n    color: var(--vscode-activityBarBadge-foreground);\n    border-radius: 12px;\n    font-size: 12px;\n  }\n  .${n}-instantiation-key {\n    color: var(--vscode-activityBarBadge-foreground);\n    font-weight: 500;\n  }\n  .${n}-instantiation-eq {\n    color: var(--vscode-activityBarBadge-foreground);\n    opacity: 0.6;\n  }\n  .${n}-instantiation-val {\n    color: var(--vscode-activityBarBadge-foreground);\n    font-weight: 500;\n  }\n`}("mc")}\n    .mc-instantiation-row {\n      max-width: 720px;\n      margin-left: 8px;\n      margin-right: 8px;\n    }\n    .kv-key-clickable {\n      cursor: pointer;\n    }\n    .kv-key-clickable:hover {\n      background: var(--vscode-list-hoverBackground);\n      border-radius: 3px;\n    }\n    .mc-json-view {\n      margin: 8px;\n    }\n    ${function(n){return`\n  .${n}-json-view {\n    position: relative;\n    background: var(--vscode-editor-background);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 6px;\n    max-height: 600px;\n  }\n  .${n}-json-content {\n    padding: 12px;\n    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;\n    font-size: 12px;\n    white-space: pre;\n    overflow: auto;\n    max-height: 600px;\n  }\n  .${n}-copy-button {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 11px;\n    color: var(--vscode-button-foreground);\n    background: var(--vscode-button-background);\n    border: none;\n    border-radius: 4px;\n    padding: 4px 8px;\n    cursor: pointer;\n    transition: background 0.15s, opacity 0.15s;\n    opacity: 0;\n  }\n  .${n}-json-view:hover .${n}-copy-button,\n  .${n}-json-content:hover ~ .${n}-copy-button {\n    opacity: 1;\n  }\n  .${n}-copy-button:hover {\n    background: var(--vscode-button-hoverBackground);\n  }\n  .${n}-copy-button svg {\n    width: 14px;\n    height: 14px;\n  }\n`}("mc")}\n  `;var z;const C=JSON.stringify(a,null,2),O=j?function(n){return n.states.map((n=>({index:n.index,tag:d(n.transition),fields:n.fields,failing:n.failing})))}(j):[],{combinedTheory:_,remainingExtraVals:V}=o.useMemo((()=>j?.theory?g(j.theory,j.extraVals):{combinedTheory:{},remainingExtraVals:{}}),[j]),M=j?.instantiation;return n(r,{children:[e("style",{children:F}),n("div",{className:"mc-root",children:[n("div",{className:"mc-toolbar",children:[!p&&n(r,{children:[n("button",{className:"mc-toggle-link "+(N.size>0?"mc-filter-active":""),onClick:()=>B(!S),title:"Filter visible fields (F)",children:["Filter fields ",N.size>0?`(${N.size} hidden)`:""," (F)"]}),e("button",{className:"mc-toggle-link",onClick:()=>w(!1===k),title:"Keyboard shortcut: C",children:!1===k?"Expand all (C)":"Collapse all (C)"}),e("button",{className:"mc-toggle-link",onClick:()=>v(!f),title:"Keyboard shortcut: R",children:f?"Hide removals (R)":"Show removals (R)"})]}),e("button",{className:"mc-toggle-link",onClick:()=>u(!p),children:p?"Show formatted":"Show JSON"})]}),p?n("div",{className:"mc-json-view",children:[e(s,{text:C,className:"mc-copy-button"}),e("div",{className:"mc-json-content",children:C})]}):n(r,{children:["result"in a&&e(r,{children:"cancelled"===a.result?e(y,{resultType:"cancelled"}):"no_violation_found"===a.result?e(y,{resultType:"no_violation_found",exploredStates:a.explored_states,terminationReason:a.termination_reason}):e(y,{resultType:"found_violation",violation:a.violation})}),M&&Object.keys(M).length>0&&e(h,{instantiation:M,prefix:"mc"}),Object.keys(_).length>0&&e(b,{theory:_}),O.length>0?n(r,{children:[e("div",{className:"mc-trace "+(c?"vertical":"horizontal"),children:O.map(((n,r)=>{const o=function(n,e){const r=new Map;if(!n)return r;const o=new Set([...Object.keys(n),...Object.keys(e)]);for(const a of o){if(!(a in n)||!(a in e)){r.set(a,{type:"full"});continue}const o=n[a],s=e[a];if(!t(o,s))if(Array.isArray(o)&&Array.isArray(s)){const n=i(o,s);n.some((n=>"unchanged"!==n.status))&&r.set(a,{type:"array",mergedView:n})}else r.set(a,{type:"full"})}return r}(r>0?O[r-1].fields:void 0,n.fields);return e(m,{st:n,changes:o,showRemovals:f,forceOpen:k,hiddenFields:N,onHideField:E,onResetForceOpen:()=>w(null)},n.index)}))}),Object.keys(V).length>0&&e(x,{title:"Extra Values",fields:V}),n("div",{className:"mc-summary",children:[e("strong",{children:"Summary:"})," ",O.length," states in trace"]})]}):"result"in a&&"found_violation"===a.result&&e("div",{className:"mc-summary",children:e("strong",{children:"No trace available"})})]}),S&&n(r,{children:[e("div",{className:"mc-filter-backdrop",onClick:()=>B(!1)}),n("div",{className:"mc-filter-panel",children:[n("div",{className:"mc-filter-header",children:[e("span",{children:"Visible Fields"}),n("div",{className:"mc-filter-actions",children:[e("button",{className:"mc-filter-action",onClick:()=>$(new Set),children:"Show all"}),e("button",{className:"mc-filter-action",onClick:()=>$(new Set(A)),children:"Hide all"}),e("button",{className:"mc-filter-close",onClick:()=>B(!1),title:"Close (Esc)",children:"Ã—"})]})]}),e("div",{className:"mc-filter-list",children:A.map((r=>n("label",{className:"mc-filter-item",children:[e("input",{type:"checkbox",checked:!N.has(r),onChange:()=>E(r)}),e("code",{children:r})]},r)))})]})]})]})]})};export{k as default};